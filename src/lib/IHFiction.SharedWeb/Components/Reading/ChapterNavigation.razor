@if (Chapters.Any())
{
    var chapters = Chapters.OrderBy(c => c.Order).ToList();
    var currentIndex = chapters.FindIndex(c => c.Id == CurrentChapterId);
    var previousChapter = currentIndex > 0 ? chapters[currentIndex - 1] : null;
    var nextChapter = currentIndex >= 0 && currentIndex < chapters.Count - 1 ? chapters[currentIndex + 1]
    : null;

    <div class="field is-grouped">
        @if (previousChapter != null)
        {
            <div class="control">
                <a class="button">
                    <span class="icon">
                        <i class="fas fa-chevron-left"></i>
                    </span>
                    @if (ShowLabels)
                    {
                        <span>Previous</span>
                    }
                </a>
            </div>
        }
        else if (ShowLabels)
        {
            <div class="control">
                <button class="button" disabled>
                    <span class="icon">
                        <i class="fas fa-chevron-left"></i>
                    </span>
                    <span>Previous</span>
                </button>
            </div>
        }

        @if (ShowLabels && currentIndex >= 0)
        {
            <div class="control">
                <span class="button is-static">
                    Chapter @(currentIndex + 1) of @chapters.Count
                </span>
            </div>
        }

        @if (nextChapter != null)
        {
            <div class="control">
                <a class="button">
                    @if (ShowLabels)
                    {
                        <span>Next</span>
                    }
                    <span class="icon">
                        <i class="fas fa-chevron-right"></i>
                    </span>
                </a>
            </div>
        }
        else if (ShowLabels)
        {
            <div class="control">
                <button class="button" disabled>
                    <span>Next</span>
                    <span class="icon">
                        <i class="fas fa-chevron-right"></i>
                    </span>
                </button>
            </div>
        }
    </div>
}

@code {
    [Parameter, EditorRequired] public string CurrentChapterId { get; set; } = null!;
    [Parameter] public IEnumerable<ChapterItem> Chapters { get; set; } = [];
    [Parameter] public bool ShowLabels { get; set; } = false;
}